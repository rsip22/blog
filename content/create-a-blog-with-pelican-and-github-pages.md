Title: Creating a blog with pelican and Github pages
Date: 2017-11-26 20:30
Modified: 2017-11-26 20:30
Category: blog
Tags: development, outreachy, python, pelican, markdown, github
Slug: create-a-blog-with-pelican-and-github-pages
Authors: Renata
Summary: How this blog was created

Before we begin, I expect you to be familiarized with Github and how to create a Python virtual enviroment. If you aren't, I recommend you to learn with the [Django Girls tutorial](https://tutorial.djangogirls.org), which covers that and more.

This is a tutorial to help you publish a personal blog hosted by Github. For that, you will need a regular Github user account (instead of a project account).

The first thing we will do is to create the Github repository where our code will live. If you want your blog to point to only your username (like rsip22.github.io) instead of a subfolder (like rsip22.github.io/blog), you must create the repository with that full name.

![Screenshot of Github, the menu to create a new repository is open and a new repo is being created with the name 'rsip22.github.io']({filename}/img/create_github_repository.png)

I recommend that you initialize your repository with a README, with a .gitignore for Python and with a [free software license](https://www.gnu.org/licenses/license-list.html). If you use a free software license, *you still own the code*, but you make sure that others will benefit from it, by allowing them to study it, reuse it and, most importantly, keep sharing it.

Now that our repository is ready, let's clone it to the folder we will be using to store our code in our machine:

```
$ git clone https://github.com/YOUR_USERNAME/YOUR_USERNAME.github.io.git
```

And change to the new directory:

```
$ cd YOUR_USERNAME.github.io
```

<!-- more -->
Because of how Github Pages prefers to work, serving the files from the master branch, we will put our source code in a new branch, preserving the "master" for the output of the static files generated by Pelican. To do that, we create a new branch called "source":

```
$ git checkout -b source
```

Create the virtualenv with the Python3 version installed on your system.

On GNU/Linux systems, the command might go as:

```
$ python3 -m venv venv
```

or as

```
$ virtualenv --python=python3.5 venv
```

And we activate it:

```
$ source venv/bin/activate
```

Inside our virtualenv, we will now install pelican it's dependencies. We aill also install ghp-import (to help us with publishing to github) and Markdown (for making our posts using markdown):

```
(venv)$ pip install pelican markdown ghp-import
```

Once that is done, we will start creating our blog using pelican-quickstart:

```
(venv)$ pelican-quickstart
```

Which will prompt a series of questions. Take a look at my answers below:

```
> Where do you want to create your new web site? [.] ./
> What will be the title of this web site? Renata's blog
> Who will be the author of this web site? Renata
> What will be the default language of this web site? [pt] en
> Do you want to specify a URL prefix? e.g., http://example.com   (Y/n) n
> Do you want to enable article pagination? (Y/n) y
> How many articles per page do you want? [10] 10
> What is your time zone? [Europe/Paris] America/Sao_Paulo
> Do you want to generate a Fabfile/Makefile to automate generation and publishing? (Y/n) Y **# PAY ATTENTION TO THIS!**
> Do you want an auto-reload & simpleHTTP script to assist with theme and site development? (Y/n) n
> Do you want to upload your website using FTP? (y/N) n
> Do you want to upload your website using SSH? (y/N) n
> Do you want to upload your website using Dropbox? (y/N) n
> Do you want to upload your website using S3? (y/N) n
> Do you want to upload your website using Rackspace Cloud Files? (y/N) n
> Do you want to upload your website using GitHub Pages? (y/N) y
> Is this your personal page (username.github.io)? (y/N) y
Done. Your new project is available at /home/username/YOUR_USERNAME.github.io

```

About the time zone, it should be specified as TZ Time zone (full list here: [List of tz database time zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)).

Now, let's create our first post! You might want to open the project folder on your favorite code editor and find the "content" folder inside it. Then, create a *new* file, which can be called my-first-post.md (don't worry, this is just for us to test, you can change it later). The contents should begin with the metadata which identifies the Title, Date, Category and more from the post before you start with the content, like this:

```
.lang="markdown" # DON'T COPY this line, it exists just for highlighting purposes

Title: My first post
Date: 2017-11-26 10:01
Modified: 2017-11-27 12:30
Category: misc
Tags: first, misc
Slug: My-first-post
Authors: Your name
Summary: What does your post talk about? Write here.

This is the *first post* from my Pelican blog. **YAY!**
```
Let's see how it looks?

Go to the terminal, generate the static files and start the server. To do that, use the following command:

```
(venv)$ make html && make serve
```

While this command runs, you should be able to visit it on your favorite web browser by typing localhost:8000 on the address bar.

![Screenshot of the blog home. It has a header with the title Renata\'s blog, the first post on the left, info about the post on the right, links and social on the bottom.]({filename}/img/blog_screenshot.png)

Pretty neat, right?

Now, what if we want to put an image in a post, how do we do that? Well, first you create a directory *inside* your content directory, where your posts are. Let's call this directory 'images' for easy reference. Now, we have to tell Pelican to use it. Find the *pelicanconf.py*, the file where we configure our system, and add a variable that contains the directory with your images:

```
.lang="python" # DON'T COPY this line, it exists just for highlighting purposes

STATIC_PATHS = ['images']
```

Save it. Go to your post and add the image this way:

```
.lang="markdown" # DON'T COPY this line, it exists just for highlighting purposes

![Write here a good description for people who can't see the image]({filename}/images/IMAGE_NAME.jpg)
```

You can interrupt the server at anytime pressing CTRL+C on the terminal. But you should start it again and check if the image is correct. Remember how?

```
(venv)$ make html && make serve
```

One last step before our coding is "done": we will make sure anyone can read our posts using ATOM or RSS feeds. Find the *pelicanconf.py*, the file where we configure our system, and edit the part about feed generation:

```
.lang="python" # DON'T COPY this line, it exists just for highlighting purposes

FEED_ALL_ATOM = 'feeds/all.atom.xml'
FEED_ALL_RSS = 'feeds/all.rss.xml'
AUTHOR_FEED_RSS = 'feeds/%s.rss.xml'
RSS_FEED_SUMMARY_ONLY = False
```

Save everything so we can send our code to Github. We do that by adding all files, committing it with a message ('first commit') and using git push. You will be asked for your Github login and password.

```
$ git add -A && git commit -a -m 'first commit' && git push --all

```
And remember how at the very beginning I said we would be preserving the master branch for the output of the static files generated by Pelican? Now it's time for us to generate them:

```
$ make github
```
You will be asked for your Github login and password again. And... voil√†! Your new blog should live on https://YOUR_USERNAME.github.io.

If you had an error in any step of the way, please reread this tutorial, try and see if you can detect in which part the problem happened, because that is the first step to debbugging. Sometimes, even something simple like a typo or, with Python, a wrong indentation, can give us trouble. Shout out and ask for help online or on your community.

For tips on how to write your posts using Markdown, you should read the [Daring Fireball Markdown guide](https://daringfireball.net/projects/markdown/syntax).

To get other themes, I recommend you visit [Pelican Themes](http://www.pelicanthemes.com/).

This post was adapted from [Adrien Leger's Create a github hosted Pelican blog with a Bootstrap3 theme](https://a-slide.github.io/blog/github-pelican). I hope it was somewhat useful for you.
